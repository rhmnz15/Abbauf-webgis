"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkmy_webpack_project"] = self["webpackChunkmy_webpack_project"] || []).push([["Grid Analysis"],{

/***/ "./app/Views/webgis/js/src/maptools/gridAnalysis.js":
/*!**********************************************************!*\
  !*** ./app/Views/webgis/js/src/maptools/gridAnalysis.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addFeatures\": () => (/* binding */ addFeatures),\n/* harmony export */   \"addInteraction\": () => (/* binding */ addInteraction),\n/* harmony export */   \"draw\": () => (/* binding */ draw),\n/* harmony export */   \"select\": () => (/* binding */ select),\n/* harmony export */   \"source\": () => (/* binding */ source)\n/* harmony export */ });\n/* harmony import */ var _map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../map */ \"./app/Views/webgis/js/src/map.js\");\n/* harmony import */ var ol_proj_proj4__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ol/proj/proj4 */ \"./node_modules/ol/proj/proj4.js\");\n/* harmony import */ var ol_interaction_Draw__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ol/interaction/Draw */ \"./node_modules/ol/interaction/Draw.js\");\n/* harmony import */ var ol_proj__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ol/proj */ \"./node_modules/ol/proj.js\");\n/* harmony import */ var ol_layer__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ol/layer */ \"./node_modules/ol/layer/Vector.js\");\n/* harmony import */ var ol_source__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ol/source */ \"./node_modules/ol/source/Vector.js\");\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style/Text.js\");\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style/Fill.js\");\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style/Stroke.js\");\n/* harmony import */ var ol_style__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ol/style */ \"./node_modules/ol/style/Style.js\");\n/* harmony import */ var ol_ext_source_GridBin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ol-ext/source/GridBin */ \"./node_modules/ol-ext/source/GridBin.js\");\n/* harmony import */ var ol_Feature__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ol/Feature */ \"./node_modules/ol/Feature.js\");\n/* harmony import */ var ol_geom_Point__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ol/geom/Point */ \"./node_modules/ol/geom/Point.js\");\n/* harmony import */ var _measure__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./measure */ \"./app/Views/webgis/js/src/maptools/measure.js\");\n/* harmony import */ var ol_interaction_Select__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ol/interaction/Select */ \"./node_modules/ol/interaction/Select.js\");\n/* harmony import */ var ol_Overlay__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ol/Overlay */ \"./node_modules/ol/Overlay.js\");\n/* harmony import */ var _functionButtonControl__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./functionButtonControl */ \"./app/Views/webgis/js/src/maptools/functionButtonControl.js\");\n/* harmony import */ var _circleanalysis__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./circleanalysis */ \"./app/Views/webgis/js/src/maptools/circleanalysis.js\");\n/* harmony import */ var ol_format_WKT__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ol/format/WKT */ \"./node_modules/ol/format/WKT.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n // Define proj4 projection\n\nproj4.defs(\"EPSG:2154\", \"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\nproj4.defs(\"EPSG:3035\", \"+proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs\");\nproj4.defs(\"EPSG:27700\", \"+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs\");\nproj4.defs(\"EPSG:23032\", \"+proj=utm +zone=32 +ellps=intl +towgs84=-87,-98,-121,0,0,0,0 +units=m +no_defs\");\nproj4.defs(\"EPSG:2163\", \"+proj=laea +lat_0=45 +lon_0=-100 +x_0=0 +y_0=0 +a=6370997 +b=6370997 +units=m +no_defs\"); // Define projection extent\n\n(0,ol_proj_proj4__WEBPACK_IMPORTED_MODULE_6__.register)(proj4); // Create Funtion to add Features point\n\nfunction addFeatures(nb) {\n  var ssize = 5; // seed size\n\n  var ext = _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().calculateExtent();\n  var dx = ext[2] - ext[0];\n  var dy = ext[3] - ext[1];\n  var dl = Math.min(dx, dy);\n  var features = [];\n\n  for (var i = 0; i < nb / ssize; ++i) {\n    var seed = [ext[0] + dx * Math.random(), ext[1] + dy * Math.random()];\n\n    for (var j = 0; j < ssize; j++) {\n      var f = new ol_Feature__WEBPACK_IMPORTED_MODULE_7__[\"default\"](new ol_geom_Point__WEBPACK_IMPORTED_MODULE_8__[\"default\"]([seed[0] + dl / 10 * Math.random(), seed[1] + dl / 10 * Math.random()]));\n      features.push(f);\n    }\n  }\n\n  source.clear(true);\n  source.addFeatures(features);\n  reset();\n}\nvar source = new ol_source__WEBPACK_IMPORTED_MODULE_9__[\"default\"](); // Interaction to move the source features\n// const modify = new Modify({ source: source });\n// modify.setActive(false);\n// map.addInteraction(modify);\n\nvar layerSource = new ol_layer__WEBPACK_IMPORTED_MODULE_10__[\"default\"]({\n  source: source,\n  visible: false\n});\n_map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addLayer(layerSource);\nvar labelStyle = new ol_style__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n  font: \"12px Calibri,sans-serif\",\n  overflow: true,\n  fill: new ol_style__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n    color: \"#fff\"\n  }),\n  stroke: new ol_style__WEBPACK_IMPORTED_MODULE_13__[\"default\"]({\n    color: \"#000\",\n    width: 1\n  })\n});\nvar min, max; // style for Grid color and add Text Style\n\nvar styleFn = function styleFn(f, res) {\n  var color;\n  var s = f.get(\"features\").length;\n  if (s > min + 2 * (max - min) / 3) color = [136, 0, 0, 0.5];else if (s > min + (max - min) / 3) color = [255, 165, 0, 0.5];else color = [0, 136, 0, 0.5];\n  var style = new ol_style__WEBPACK_IMPORTED_MODULE_14__[\"default\"]({\n    fill: new ol_style__WEBPACK_IMPORTED_MODULE_12__[\"default\"]({\n      color: color\n    }),\n    text: labelStyle\n  });\n  style.getText().setText(s.toString());\n  return [style];\n}; // The Grid layer\n\n\nvar grid = new ol_layer__WEBPACK_IMPORTED_MODULE_10__[\"default\"]({\n  minZoom: 14,\n  maxZoom: 20,\n  style: styleFn,\n  source: new ol_ext_source_GridBin__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n    source: source\n  }),\n  declutter: true\n});\n_map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addLayer(grid); // Create Bin\n\nfunction calcMinMax() {\n  max = 0;\n  min = Infinity;\n  grid.getSource().getFeatures().forEach(function (f) {\n    var nb = f.get(\"features\").length;\n    if (nb > max) max = nb;\n    if (nb < min) min = nb;\n  });\n}\n\nfunction reset() {\n  grid.getSource().setSize(0.001);\n  calcMinMax();\n} // add features\n\n\naddFeatures(0); // function to setProjection\n\nfunction setProjection(p) {\n  var ex = _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().calculateExtent();\n  var p1 = _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().getCenter();\n  var p2 = [p[0], p[1] + 1];\n  var p01 = (0,ol_proj__WEBPACK_IMPORTED_MODULE_1__.transform)(p1, _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().getProjection(), grid.getSource().get(\"gridProjection\"));\n  var p02 = (0,ol_proj__WEBPACK_IMPORTED_MODULE_1__.transform)(p2, _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().getProjection(), grid.getSource().get(\"gridProjection\"));\n  grid.getSource().set(\"gridProjection\", \"EPSG:\" + p);\n  var p11 = (0,ol_proj__WEBPACK_IMPORTED_MODULE_1__.transform)(p1, _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().getProjection(), grid.getSource().get(\"gridProjection\"));\n  var p12 = (0,ol_proj__WEBPACK_IMPORTED_MODULE_1__.transform)(p2, _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getView().getProjection(), grid.getSource().get(\"gridProjection\"));\n  reset();\n}\n\nsetProjection(4326); // Function Draw Point\n\nvar draw;\nfunction addInteraction() {\n  draw = new ol_interaction_Draw__WEBPACK_IMPORTED_MODULE_15__[\"default\"]({\n    source: source,\n    type: \"Point\",\n    style: _measure__WEBPACK_IMPORTED_MODULE_3__.style\n  });\n  draw.on(\"drawend\", function (e) {\n    var format = new ol_format_WKT__WEBPACK_IMPORTED_MODULE_16__[\"default\"]();\n    var wktFeatureGeom = format.writeGeometry(e.feature.getGeometry());\n    console.log(wktFeatureGeom);\n    addFeatures(1000);\n    _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].removeInteraction(draw);\n    $(\".collapse\").collapse(\"show\");\n  });\n  _map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addInteraction(draw);\n}\nvar container = document.getElementById(\"popup-grid\");\nvar overlayGrid = new ol_Overlay__WEBPACK_IMPORTED_MODULE_17__[\"default\"]({\n  element: container\n});\n_map__WEBPACK_IMPORTED_MODULE_0__[\"default\"].addOverlay(overlayGrid);\nvar select = new ol_interaction_Select__WEBPACK_IMPORTED_MODULE_18__[\"default\"](); // Event Select on each feature\n\nselect.on(\"select\", function (e) {\n  if (e.selected.length) {\n    var coordinate = e.mapBrowserEvent.coordinate;\n    overlayGrid.setPosition(coordinate);\n    $(\"#popup-grid\").toggleClass(\"d-none\", false);\n  } else {\n    overlayGrid.setPosition(undefined);\n    $(\"#popup-grid\").toggleClass(\"d-none\", true);\n  }\n});\nvar content = document.getElementById(\"popup-select-grid\");\nvar closer = document.getElementById(\"popup-closer-grid\");\n\ncloser.onclick = function () {\n  overlayGrid.setPosition(undefined);\n  closer.blur();\n  $(\"#popup-grid\").toggleClass(\"d-none\", true);\n  return false;\n}; // $(\"#gridAnalysis\").on(\"click\", function() {\n// disableAllFunction($(this));\n//   map.removeInteraction(draw);\n//   map.addInteraction(select);\n//   addInteraction();\n// });\n// $(\"#clearAnalysis\").on(\"click\", function() {\n//   disableAllFunction($(this));\n//   map.removeInteraction(drawCircle);\n//   source_analysis.clear();\n//   modifyCircleAnalysis.setActive(false);\n//   map.removeInteraction(draw);\n//   addFeatures(0);\n//   source.clear();\n//   map.removeInteraction(select);\n// });\n\n//# sourceURL=webpack://my-webpack-project/./app/Views/webgis/js/src/maptools/gridAnalysis.js?");

/***/ })

}]);